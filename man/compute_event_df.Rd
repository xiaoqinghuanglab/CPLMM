% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survival_events.R
\name{compute_event_df}
\alias{compute_event_df}
\title{Compute event/censoring times from longitudinal biomarker threshold crossing}
\usage{
compute_event_df(
  df,
  threshold,
  biomarker,
  group_label,
  onset_source = "ONSET_AGE"
)
}
\arguments{
\item{df}{A data.frame/tibble of longitudinal visits with columns
\code{SUBID}, \code{PROCEDURE_AGE}, the biomarker column, and \code{onset_source}.}

\item{threshold}{Numeric threshold for event definition.}

\item{biomarker}{Character; biomarker column name.}

\item{group_label}{Character; label stored in the \code{group} column of output.}

\item{onset_source}{Character; column giving onset-age reference. Default \code{"ONSET_AGE"}.}
}
\value{
A tibble with columns \code{SUBID}, \code{time}, \code{event} (0/1), \code{group}.
}
\description{
For each subject, sorts by \code{PROCEDURE_AGE}, takes the first value of
\code{onset_source} as the onset reference, and checks whether the biomarker
ever crosses \code{threshold}. If yes, event time = age at the first crossing
minus onset; if not, censor at last observed \code{PROCEDURE_AGE} minus onset.
}
